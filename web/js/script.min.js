/*! country-info-interface 07-09-2014 */
angular.module("country-interface",["ngRoute","ci.countries"]).config(["$routeProvider",function(a){a.when("/country/:cca3",{controller:"CountryDetailController",templateUrl:"template/countryDetail.html"}).when("/search/:search",{controller:"CountryIndexController",templateUrl:"template/countryIndex.html"}).otherwise({controller:"CountryIndexController",templateUrl:"template/countryIndex.html"})}]),angular.module("ci.countries",["ci.countries.controllers","ci.countries.directives","ci.countries.filters","ci.countries.services"]),angular.module("ci.countries.controllers",[]),angular.module("ci.countries.directives",[]),angular.module("ci.countries.filters",[]),angular.module("ci.countries.services",[]),angular.module("ci.countries.controllers").controller("CountryDetailController",["$scope","$routeParams","CountryService",function(a,b,c){a.country={},c.find(b.cca3).then(function(b){a.country=b,a.country.osmUrl=d()});var d=function(){var b=a.country.latlng[0],c=a.country.latlng[1];return"http://www.openstreetmap.org/#map=5/"+b+"/"+c}}]),angular.module("ci.countries.controllers").controller("CountryIndexController",["$scope","$location","$routeParams","CountryService",function(a,b,c,d){a.countries=[],a.searchTerm=c.search?c.search:"",d.query().then(function(b){a.countries=b}),a.showDetail=function(a){b.path("/country/"+a.cca3)}}]),angular.module("ci.countries.services").factory("CountryService",["$http","$q",function(a,b){return{query:function(){var c=b.defer();return a.get("/data/countries.json",{cache:!0}).success(function(a){c.resolve(a)}).error(function(){c.resolve([])}),c.promise},find:function(a){var c=b.defer();return a=a.toUpperCase(),this.query().then(function(b){angular.forEach(b,function(b){a===b.cca3&&c.resolve(b)}),c.resolve({})}),c.promise}}}]),angular.module("ci.countries.directives").directive("countrySummary",[function(){return{link:function(){},restrict:"E",scope:{country:"=",select:"&onSelect"},templateUrl:"/template/countrySummaryDirective.html"}}]),angular.module("ci.countries.filters").filter("search",function(){return function(a,b){var c=[];b=b.toUpperCase();var d=function(a){return a.toUpperCase().substring(0,b.length)===b},e=function(a){var b=!1;return angular.forEach(a,function(a){d(a)&&(b=!0)}),b};return angular.forEach(a,function(a){d(a.name)?c.push(a):d(a.nativeName)?c.push(a):b.length<=2&&d(a.cca2)?c.push(a):b.length<=3&&d(a.cca3)?c.push(a):b.length<=3&&e(a.currency)?c.push(a):e(a.translations)&&c.push(a)}),c}});